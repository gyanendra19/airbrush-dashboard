<!-- Steps Section -->
<div class="steps-section rts-case-area bg-smooth-2" style="padding: 80px 0; background: transparent; height: 1200px;" id="stepsSection">
    <div class="container" style="background: transparent; height: 100%;">
        <div class="row justify-content-center" style="background: transparent; height: 100%;">
            <div class="col-12 text-center mb-4" style="background: transparent; height: 100%;">
                <div style="
                    width: 140px; 
                    height: 40px; 
                    border-radius: 20px; 
                    background: rgba(255, 255, 255, 0.1);
                    padding: 8px 20px;
                    margin: 0 auto;
                    margin-bottom: 20px;
                    border: 2px solid #FFFFFF;
                ">
                    <span style="
                        color: #FFFFFF; 
                        font-family: 'Poppins', sans-serif; 
                        font-size: 14px;
                        font-weight: 500;
                    ">Join Airbrush</span>
                </div>
                <h2 style="color: #ffffff; font-size: 42px; margin-bottom: 60px; font-family: 'Outfit', sans-serif;">Download the best images</h2>
                
                <div style="position: relative; max-width: 900px; margin: 0 auto; background: transparent;">
                    <!-- Dotted Line Path -->
                    <div style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 1200px;
                        z-index: 1;
                        background: transparent;
                    ">
                        <svg width="100%" height="1200" viewBox="0 0 1200 1200" style="position: absolute; top: 0; left: 0;">
                            <path id="dottedPath" class="steps-path" d="M 250,-10 
     C 400,20 650,50 780,180 
     C 800,400 400,500 350,650 
     C 360,770 620,780 680,870"
                                stroke="#FFFFFF" 
                                stroke-width="2" 
                                stroke-dasharray="5,5" 
                                fill="none"
                            />
                            <!-- Circles at connection points -->
                            <circle id="dot1" class="step-dot" cx="250" cy="-10" r="25" fill="#FFFFFF" stroke="#7153D9" stroke-width="2"/>
                            <circle id="dot2" class="step-dot" cx="780" cy="180" r="25" fill="#FFFFFF" stroke="#7153D9" stroke-width="2"/>
                            <circle id="dot3" class="step-dot" cx="350" cy="650" r="25" fill="#FFFFFF" stroke="#7153D9" stroke-width="2"/>
                            <circle id="dot4" class="step-dot" cx="680" cy="870" r="25" fill="#FFFFFF" stroke="#7153D9" stroke-width="2"/>
                        </svg>
                    </div>

                    <!-- Steps -->
                    <div style="
                        display: grid;
                        grid-template-columns: repeat(2, 1fr);
                        gap: 40px;
                        position: relative;
                        z-index: 2;
                        background: transparent;
                    ">
                        <!-- Step 1 -->
                        <div class="step-box" data-position="left" style="
                            background: rgba(255, 240, 245, 0.95);
                            border-radius: 16px;
                            padding: 24px;
                            text-align: left;
                            width: 300px;
                            height: 250px;
                            position: relative;
                            right: 160px;
                        ">
                            <div style="
                                background: #4526B1;
                                padding: 8px 16px;
                                border-radius: 16px 0 0 0;
                                margin: -24px -24px 16px -24px;
                                width: 60%;
                                text-align: center;
                            ">
                                <div style="color: #FFFFFF; font-size: 16px; font-weight: bold;">Step</div>
                            </div>
                            <div class="step-number" style="
                                color: #4526B1;
                                font-size: 100px;
                                font-weight: bold;
                                line-height: 1;
                                margin-bottom: 16px;
                                background: linear-gradient(135deg, #4526B1, #F86635);
                                -webkit-background-clip: text;
                                -webkit-text-fill-color: transparent;
                                text-align: center;
                                margin-top: -20px;
                            ">01</div>
                            <h3 style="color: #333; font-size: 20px; margin: -6px; margin-left: 1px; font-family: 'Outfit', sans-serif;">Create your account</h3>
                            <p style="color: #000000; font-size: 16px; font-family: 'Outfit', sans-serif; margin-top: -10px;">Register your account to get started</p>
                        </div>

                        <!-- Step 2 -->
                        <div class="step-box" data-position="right" style="
                            background: rgba(255, 240, 245, 0.95);
                            border-radius: 16px;
                            padding: 24px;
                            text-align: left;
                            margin-top: 40px;
                            width: 300px;
                            height: 250px;
                            position: relative;
                            top: 100px;
                            left: 160px;
                        ">
                            <div style="
                                background: #4526B1;
                                padding: 8px 16px;
                                border-radius: 16px 0 0 0;
                                margin: -24px -24px 16px -24px;
                                width: 60%;
                                text-align: center;
                            ">
                                <div style="color: #FFFFFF; font-size: 16px; font-weight: bold;">Step</div>
                            </div>
                            <div class="step-number" style="
                                color: #4526B1;
                                font-size: 100px;
                                font-weight: bold;
                                line-height: 1;
                                margin-bottom: 16px;
                                background: linear-gradient(135deg, #4526B1, #F86635);
                                -webkit-background-clip: text;
                                -webkit-text-fill-color: transparent;
                                text-align: center;
                                margin-top: -20px;
                            ">02</div>
                            <h3 style="color: #333; font-size: 20px; margin: -6px; margin-left: 1px; font-family: 'Outfit', sans-serif;">Choose your Use - Case</h3>
                            <p style="color: #000000; font-size: 16px; font-family: 'Outfit', sans-serif; margin-top: -6px;">Choose one of the available user cases to generate your image</p>
                        </div>

                        <!-- Step 3 -->
                        <div class="step-box" data-position="left" style="
                            background: rgba(255, 240, 245, 0.95);
                            border-radius: 16px;
                            padding: 24px;
                            text-align: left;
                            margin-top: -40px;
                            width: 300px;
                            height: 250px;
                            position: relative;
                            top: 200px;
                            right: 80px;
                        ">
                            <div style="
                                background: #4526B1;
                                padding: 8px 16px;
                                border-radius: 16px 0 0 0;
                                margin: -24px -24px 16px -24px;
                                width: 60%;
                                text-align: center;
                            ">
                                <div style="color: #FFFFFF; font-size: 16px; font-weight: bold;">Step</div>
                            </div>
                            <div class="step-number" style="
                                color: #4526B1;
                                font-size: 100px;
                                font-weight: bold;
                                line-height: 1;
                                margin-bottom: 16px;
                                background: linear-gradient(135deg, #4526B1, #F86635);
                                -webkit-background-clip: text;
                                -webkit-text-fill-color: transparent;
                                text-align: center;
                                margin-top: -20px;
                            ">03</div>
                            <h3 style="color: #333; font-size: 20px; margin: -6px; margin-left: 1px; font-family: 'Outfit', sans-serif;">Provide short description</h3>
                            <p style="color: #000000; font-size: 16px; font-family: 'Outfit', sans-serif; margin-top: -6px;">Provide description of the type of the image you want to generate</p>
                        </div>

                        <!-- Step 4 -->
                        <div class="step-box" data-position="right" style="
                            background: rgba(255, 240, 245, 0.95);
                            border-radius: 16px;
                            padding: 24px;
                            text-align: left;
                            width: 300px;
                            height: 250px;
                            position: relative;
                            top: 350px;
                            left: 80px;
                        ">
                            <div style="
                                background: #4526B1;
                                padding: 8px 16px;
                                border-radius: 16px 0 0 0;
                                margin: -24px -24px 16px -24px;
                                width: 60%;
                                text-align: center;
                            ">
                                <div style="color: #FFFFFF; font-size: 16px; font-weight: bold;">Step</div>
                            </div>
                            <div class="step-number" style="
                                color: #4526B1;
                                font-size: 100px;
                                font-weight: bold;
                                line-height: 1;
                                margin-bottom: 16px;
                                background: linear-gradient(135deg, #4526B1, #F86635);
                                -webkit-background-clip: text;
                                -webkit-text-fill-color: transparent;
                                text-align: center;
                                margin-top: -20px;
                            ">04</div>
                            <h3 style="color: #333; font-size: 20px; margin: -24px; margin-left: 1px; font-family: 'Outfit', sans-serif;">Download Your Image</h3>
                            <p style="color: #000000; font-size: 16px; font-family: 'Outfit', sans-serif; margin-top: 8px;">You can click on the download button to download it to your device for further use</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
@media (max-width: 768px) {
    .steps-section [style*="grid-template-columns"] {
        grid-template-columns: 1fr !important;
        gap: 15px !important;
    }
    
    .steps-section .step-box {
        width: 240px !important;
        height: 200px !important;
        padding: 15px !important;
        margin: 0 auto !important;
        transform: scale(0.9) !important;
        transition: all 0.3s ease !important;
    }
    
    .steps-section .step-box.glow-mobile {
        box-shadow: 0 0 15px rgba(255, 99, 71, 0.8) !important;
        transform: scale(0.95) !important;
        border: 1px solid rgba(255, 99, 71, 0.5) !important;
    }
    
    .steps-section .step-number {
        font-size: 70px !important;
        margin-top: -15px !important;
        margin-bottom: 10px !important;
    }
    
    .steps-section h3 {
        font-size: 16px !important;
        margin: -5px !important;
        margin-left: 1px !important;
    }
    
    .steps-section p {
        font-size: 13px !important;
        margin-top: -5px !important;
    }
    
    .steps-section [style*="margin-top"] {
        margin-top: 0 !important;
    }
    
    .steps-section {
        height: auto !important;
        padding: 50px 0 !important;
    }
    
    .steps-section .step-box div[style*="border-radius: 16px 0 0 0"] {
        padding: 6px 12px !important;
        margin: -15px -15px 10px -15px !important;
    }
    
    .steps-section .step-box div[style*="border-radius: 16px 0 0 0"] div {
        font-size: 14px !important;
    }
    
    /* Hide dots and path on mobile */
    .steps-section .step-dot {
        display: none !important;
    }
    
    .steps-section .steps-path {
        display: none !important;
    }
}

@media (max-width: 480px) {
    .steps-section .step-box {
        width: 220px !important;
        height: 180px !important;
        padding: 12px !important;
        right: 0 !important;
        left: 0 !important;
        top: 0 !important;
        position: relative !important;
    }
    
    .steps-section .step-number {
        font-size: 60px !important;
        margin-top: -10px !important;
        margin-bottom: 5px !important;
    }
    
    .steps-section h3 {
        font-size: 14px !important;
        margin: -4px !important;
        margin-left: 1px !important;
    }
    
    .steps-section p {
        font-size: 12px !important;
        margin-top: -4px !important;
        line-height: 1.2 !important;
    }
    
    .steps-section .step-box div[style*="border-radius: 16px 0 0 0"] {
        padding: 5px 10px !important;
        margin: -12px -12px 8px -12px !important;
    }
}

.step-dot {
    transition: all 0.5s ease;
}

.step-dot.glow {
    fill: #ff3333;
    filter: drop-shadow(0 0 8px rgba(255, 0, 0, 0.8));
    stroke: #ff0000;
}

.steps-path {
    transition: all 0.5s ease;
    stroke: #FFFFFF; /* Ensure white color initially */
}

.steps-path.glow {
    stroke: #ff0000;
    filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.9));
    stroke-width: 4;
    stroke-dasharray: 10,10; /* Larger dash pattern when glowing */
    animation: dashAnimation 1.5s linear infinite;
}

@keyframes dashAnimation {
    to {
        stroke-dashoffset: -20;
    }
}

/* Initial states for animations */
.step-box[data-position="left"] {
    opacity: 0;
    transform: translateX(-100px);
    visibility: hidden;
}

.step-box[data-position="right"] {
    opacity: 0;
    transform: translateX(100px);
    visibility: hidden;
}
</style>

<script>
// Execute immediately when page loads to ensure proper initial state
(function() {
    // Get the path element
    const path = document.getElementById('dottedPath');
    
    // Force path to be white initially
    if (path) {
        path.setAttribute('stroke', '#FFFFFF');
        path.classList.remove('glow');
    }
})();

document.addEventListener('DOMContentLoaded', function() {
    // Get all elements that should glow
    const dots = document.querySelectorAll('.step-dot');
    const path = document.getElementById('dottedPath');
    const stepBoxes = document.querySelectorAll('.step-box');
    
    // Make sure path starts with original color
    path.setAttribute('stroke', '#FFFFFF');
    path.classList.remove('glow');
    
    // Function to check if element is in viewport with offset
    const isInViewport = function(element) {
        const rect = element.getBoundingClientRect();
        // Element just needs to be in viewport with a small offset
        const offset = 150; 
        return (
            rect.top <= (window.innerHeight - offset) &&
            rect.bottom >= offset
        );
    };
    
    // Special check for path - apply when scrolled just a bit
    const isPathVisible = function() {
        const rect = path.getBoundingClientRect();
        // Only require a small amount of scrolling
        const hasScrolled = window.scrollY > 50; // Reduced to trigger earlier
        
        return (
            hasScrolled &&
            rect.top < window.innerHeight &&
            rect.bottom > 0
        );
    };
    
    // Function to handle scroll events
    const handleScroll = function() {
        // Handle path dots
        dots.forEach(dot => {
            if (isInViewport(dot)) {
                dot.classList.add('glow');
            } else {
                dot.classList.remove('glow');
            }
        });
        
        // Handle dotted path - always check for visibility
        if (isPathVisible()) {
            path.classList.add('glow');
        } else {
            path.classList.remove('glow');
            path.setAttribute('stroke', '#FFFFFF'); // Reset to white when not glowing
        }
        
        // For mobile: Handle step boxes glow effect
        if (window.innerWidth <= 768) {
            stepBoxes.forEach(box => {
                if (isInViewport(box)) {
                    box.classList.add('glow-mobile');
                } else {
                    box.classList.remove('glow-mobile');
                }
            });
        }
    };
    
    // Force initial state - ensure path is white before any scrolling
    path.setAttribute('stroke', '#FFFFFF');
    path.style.stroke = '#FFFFFF';
    
    // Run once initially to check, then on scroll
    setTimeout(handleScroll, 500); // Give a moment for everything to render
    window.addEventListener('scroll', handleScroll);
    
    // Also run when screen size changes (in case of rotation)
    window.addEventListener('resize', handleScroll);

    // Initialize GSAP animations
    gsap.registerPlugin(ScrollTrigger);

    // Animate step boxes
    const leftBoxes = document.querySelectorAll('.step-box[data-position="left"]');
    const rightBoxes = document.querySelectorAll('.step-box[data-position="right"]');

    // Animate left boxes
    leftBoxes.forEach((box) => {
        gsap.to(box, {
            scrollTrigger: {
                trigger: box,
                start: "top 80%",
                toggleActions: "play none none reverse"
            },
            x: 0,
            opacity: 1,
            visibility: "visible",
            duration: 1,
            ease: "power2.out"
        });
    });

    // Animate right boxes
    rightBoxes.forEach((box) => {
        gsap.to(box, {
            scrollTrigger: {
                trigger: box,
                start: "top 80%",
                toggleActions: "play none none reverse"
            },
            x: 0,
            opacity: 1,
            visibility: "visible",
            duration: 1,
            ease: "power2.out"
        });
    });
});
</script> 